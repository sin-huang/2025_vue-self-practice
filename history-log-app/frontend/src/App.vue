<script setup>
import { onMounted, ref } from 'vue'
import ActionBtn from './components/ActionBtn.vue'
import HistotryList from './components/HIstoryList.vue'
import axios from 'axios'

const records = ref([]) 

// æŠ“å–æ­·å²ç´€éŒ„
const loadHistory = async () => {
  const res = await axios.get('http://localhost:3000/history')
  records.value = res.data
};

// newRecordåˆ°åº•è£äº†ä»€éº¼
// const addRecord = (newRecord) =>{
//   records.value.unshift(newRecord)
// }

const addRecord = (newRecord) => {
  console.log("æ”¶åˆ°ä¾†è‡ª ActionBtn çš„æ–°ç´€éŒ„ ðŸ‘‡")
  console.log(newRecord)
  records.value.unshift(newRecord)
}

// é¦–æ¬¡è¼‰å…¥è³‡æ–™
onMounted(()=>{
  loadHistory()
})

</script>

<template>
  <action-btn @record-added="addRecord"></action-btn>
  <!-- å› ç‚ºæˆ‘é»žæ–°å¢žå¾Œ forè¿´åœˆä¸æœƒé‡è·‘ ç•¶ç„¶æ²’é•·å‡ºä¾†å›‰ -->
  <histotry-list :records="records"></histotry-list>
</template>
